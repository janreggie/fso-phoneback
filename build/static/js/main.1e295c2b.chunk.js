(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),s=n(16),o=n.n(s),a=(n(22),n(17)),u=n(3),i=n(5),j=n.n(i),d="/api/persons",b={getAll:function(){return j.a.get(d).then((function(e){return e.data}))},addEntry:function(e){return j.a.post(d,e).then((function(e){return e.data}))},changeEntry:function(e,t){return j.a.put(d+"/"+e,t).then((function(e){return e.data}))},deleteEntry:function(e){return j.a.delete(d+"/"+e)}},f=(n(41),n(0)),h=function(e){var t=e.message,n=e.cN;return t?Object(f.jsx)("div",{className:n,children:t}):null},l=function(e){var t=e.message;return Object(f.jsx)(h,{message:t,cN:"notice"})},m=function(e){var t=e.message;return Object(f.jsx)(h,{message:t,cN:"error"})},O=function(e){var t=e.searchFor,n=e.setSearchFor;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},v=function(e){var t=e.persons,n=e.setPersons,c=e.setNotice,s=Object(r.useState)(""),o=Object(u.a)(s,2),a=o[0],i=o[1],j=Object(r.useState)(""),d=Object(u.a)(j,2),h=d[0],l=d[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:a,number:h},s=t.find((function(e){return e.name===r.name}));if(s){if(!window.confirm("".concat(r.name," is already in phonebook. Replace the old number with the new one?")))return;b.changeEntry(s.id,r).then((function(e){n(t.map((function(t){return t.name===e.name?e:t}))),i(""),l(""),c("Modified ".concat(e.name))}))}else b.addEntry(r).then((function(e){n(t.concat(e)),i(""),l(""),c("Added ".concat(e.name))}))},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:a,onChange:function(e){return i(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:h,onChange:function(e){return l(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t=e.persons,n=e.setPersons,r=e.searchFor,c=e.setNotice,s=e.setError,o=t.filter((function(e){return e.name.toLocaleLowerCase().includes(r)}));return Object(f.jsx)("div",{children:o.map((function(e){return Object(f.jsx)(p,{allPersons:t,person:e,setPersons:n,setNotice:c,setError:s},e.id)}))})},p=function(e){var t=e.person,n=e.allPersons,r=e.setPersons,c=e.setNotice,s=e.setError;return Object(f.jsxs)("div",{children:[t.name," ",t.number," ",Object(f.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&(b.deleteEntry(t.id).then((function(e){return c("".concat(t.name," has been deleted"))})).catch((function(e){return s("".concat(t.name," has already been deleted from the server"))})),r(n.filter((function(e){return e.id!==t.id}))))},children:"delete"})]})},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(u.a)(s,2),i=o[0],j=o[1],d=Object(r.useState)(""),h=Object(u.a)(d,2),p=h[0],g=h[1],w=Object(r.useState)(""),E=Object(u.a)(w,2),N=E[0],y=E[1];Object(r.useEffect)((function(){return b.getAll().then((function(e){return c([].concat(Object(a.a)(e),[{name:"Rogue Rougeson",id:1001,number:"303 444944949 "}]))}))}),[]);var S=function(e){g(e),setTimeout((function(){return g("")}),5e3)};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(l,{message:p}),Object(f.jsx)(m,{message:N}),Object(f.jsx)(O,{searchFor:i,setSearchFor:j}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(v,{persons:n,setPersons:c,setNotice:S}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(x,{persons:n,setPersons:c,searchFor:i,setNotice:S,setError:function(e){y(e),setTimeout((function(){return y("")}),5e3)}})]})};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1e295c2b.chunk.js.map