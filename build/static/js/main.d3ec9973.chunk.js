(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),o=n(16),s=n.n(o),a=(n(22),n(17)),i=n(3),u=n(5),d=n.n(u),j="/api/persons",f={getAll:function(){return d.a.get(j).then((function(e){return e.data})).catch((function(e){if(e.response)throw e.response.data.error}))},addEntry:function(e){return d.a.post(j,e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e.response.data.error}))},changeEntry:function(e,t){return d.a.put(j+"/"+e,t).then((function(e){return e.data})).catch((function(e){if(e.response)throw e.response.data.error}))},deleteEntry:function(e){return d.a.delete(j+"/"+e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e.response.data.error}))}},h=(n(41),n(0)),b=function(e){var t=e.message,n=e.cN;return t?Object(h.jsx)("div",{className:n,children:t}):null},l=function(e){var t=e.message;return Object(h.jsx)(b,{message:t,cN:"notice"})},m=function(e){var t=e.message;return Object(h.jsx)(b,{message:t,cN:"error"})},O=function(e){var t=e.searchFor,n=e.setSearchFor;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},p=function(e){var t=e.persons,n=e.setPersons,c=e.setNotice,o=e.setError,s=Object(r.useState)(""),a=Object(i.a)(s,2),u=a[0],d=a[1],j=Object(r.useState)(""),b=Object(i.a)(j,2),l=b[0],m=b[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:u,number:l},s=t.find((function(e){return e.name===r.name}));if(s){if(!window.confirm("".concat(r.name," is already in phonebook. Replace the old number with the new one?")))return;f.changeEntry(s.id,r).then((function(e){n(t.map((function(t){return t.name===e.name?e:t}))),d(""),m(""),c("Modified ".concat(e.name))})).catch((function(e){return o(e)}))}else f.addEntry(r).then((function(e){n(t.concat(e)),d(""),m(""),c("Added ".concat(e.name))})).catch((function(e){return o(e)}))},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:u,onChange:function(e){return d(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:l,onChange:function(e){return m(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var t=e.persons,n=e.setPersons,r=e.searchFor,c=e.setNotice,o=e.setError,s=t.filter((function(e){return e.name.toLocaleLowerCase().includes(r)}));return Object(h.jsx)("div",{children:s.map((function(e){return Object(h.jsx)(x,{allPersons:t,person:e,setPersons:n,setNotice:c,setError:o},e.id)}))})},x=function(e){var t=e.person,n=e.allPersons,r=e.setPersons,c=e.setNotice,o=e.setError;return Object(h.jsxs)("div",{children:[t.name," ",t.number," ",Object(h.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&(f.deleteEntry(t.id).then((function(e){return c("".concat(t.name," has been deleted"))})).catch((function(e){return o("".concat(t.name," has already been deleted from the server"))})),r(n.filter((function(e){return e.id!==t.id}))))},children:"delete"})]})},g=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],j=Object(r.useState)(""),b=Object(i.a)(j,2),x=b[0],g=b[1],w=Object(r.useState)(""),E=Object(i.a)(w,2),N=E[0],y=E[1];Object(r.useEffect)((function(){return f.getAll().then((function(e){return c([].concat(Object(a.a)(e),[{name:"Rogue Rougeson",id:1001,number:"303 444944949 "}]))}))}),[]);var S=function(e){g(e),setTimeout((function(){return g("")}),5e3)},P=function(e){y(e),setTimeout((function(){return y("")}),5e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(l,{message:x}),Object(h.jsx)(m,{message:N}),Object(h.jsx)(O,{searchFor:u,setSearchFor:d}),Object(h.jsx)("h3",{children:"add a new"}),Object(h.jsx)(p,{persons:n,setPersons:c,setNotice:S,setError:P}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(v,{persons:n,setPersons:c,searchFor:u,setNotice:S,setError:P})]})};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d3ec9973.chunk.js.map